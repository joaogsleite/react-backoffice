(this["webpackJsonpreact-backoffice"]=this["webpackJsonpreact-backoffice"]||[]).push([[0],{12:function(t,e,n){t.exports={brandContainer:"style_brandContainer__3q4mK",sideMenuSpace:"style_sideMenuSpace__dKBNk",sideMenu:"style_sideMenu__3yjZ4",menuLabel:"style_menuLabel__ViTZH",menuList:"style_menuList__3Vto5",active:"style_active__VAK3j",logo:"style_logo__n12Q8",hamburgerCheckbox:"style_hamburgerCheckbox__P4fsH",hamburgerButton:"style_hamburgerButton__36gGB"}},17:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return i})),n.d(e,"e",(function(){return u})),n.d(e,"d",(function(){return o}));var a=n(2),r="FETCH_ENTRY_PENDING",c="FETCH_ENTRY_FULFILLED",i="FETCH_ENTRY_REJECTED",u={entry:void 0,loadingEntry:!1,errorEntry:void 0};function o(t,e){switch(e.type){case r:return Object(a.a)(Object(a.a)({},t),{},{entry:void 0,loadingEntry:!0,errorEntry:void 0});case c:return Object(a.a)(Object(a.a)({},t),{},{loadingEntry:!1,entry:e.payload,errorEntry:void 0});case i:return Object(a.a)(Object(a.a)({},t),{},{loadingEntry:!1,entry:void 0,errorEntry:e.payload});case"CLEAR_ERROR_ENTRY":return Object(a.a)(Object(a.a)({},t),{},{errorEntry:void 0});default:return t}}},19:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var a=n(9),r=n(26),c=n(30),i=n(49),u=function(t){Object(r.a)(n,t);var e=Object(c.a)(n);function n(t){var r,c=t.status,i=t.statusText,u=t.body;return Object(a.a)(this,n),(r=e.call(this,i)).status=void 0,r.statusText=void 0,r.body=void 0,r.status=c,r.statusText=i,r.body=u,r}return n}(Object(i.a)(Error))},21:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return r}));var a="http://localhost:3004",r=!0},22:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return i}));var a=n(2),r="FETCH_USER_FULFILLED",c={user:void 0};function i(t,e){switch(e.type){case r:return Object(a.a)(Object(a.a)({},t),{},{user:e.payload});default:return t}}},28:function(t,e,n){"use strict";var a=n(48),r=n(2),c=n(9),i=n(14),u=n(21),o=n(19),s=(n(50),new(function(){function t(){Object(c.a)(this,t),this.baseUrl=u.a,this.defaultOptions={headers:{Accept:"application/json","Content-Type":"application/json"}}}return Object(i.a)(t,[{key:"request",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=e.startsWith("http")?e:"".concat(this.baseUrl).concat(e),i=Object(r.a)(Object(r.a)(Object(r.a)({},this.defaultOptions),n),{},{method:t,body:n.body});return fetch(c,i).then((function(t){return Promise.all([t,t.json()])})).then((function(t){var e=Object(a.a)(t,2),n=e[0],r=e[1];if(!n.ok)throw new o.a({status:n.status,statusText:n.statusText,body:r});return r}))}},{key:"get",value:function(t,e){return this.request("GET",t,e)}},{key:"post",value:function(t,e){return this.request("POST",t,e)}},{key:"put",value:function(t,e,n){return this.request("PUT",t,n)}},{key:"delete",value:function(t,e){return this.request("DELETE",t,e)}}]),t}()));e.a=s},29:function(t,e,n){"use strict";function a(t){return new Promise((function(e){return setTimeout(e,t)}))}n.d(e,"a",(function(){return a}))},3:function(t,e,n){"use strict";n.d(e,"a",(function(){return j})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return p}));var a=n(2),r=n(41),c=n(42),i=n.n(c),u=n(22),o=n(6),s=n(17),b=Object(a.a)(Object(a.a)(Object(a.a)({},u.b),o.j),s.e),l=[u.c,o.k,s.d],d=[i.a],f=Object(r.a)(b,l,d),j=f.Provider,h=f.dispatch,p=(f.withState,f.useSelector)},32:function(t,e,n){t.exports={layout:"style_layout__3gbYc",main:"style_main__3CeqX",children:"style_children__2mf42"}},37:function(t,e,n){"use strict";var a=n(9),r=n(14),c=n(28),i=n(3),u=n(19),o=n(6),s=n(17),b=new(function(){function t(e){Object(a.a)(this,t),this.api=void 0,this.api=e}return Object(r.a)(t,[{key:"list",value:function(){return Object(i.b)({type:o.b}),this.api.post("/?",{body:JSON.stringify({query:"query {\n          entities {\n            name\n            layout\n          }\n        }",variables:null})}).then((function(t){var e;if(t.error)throw t.error;if(null===(e=t.data)||void 0===e?void 0:e.entities)return Object(i.b)({type:o.a,payload:t.data.entities}),t.data.entities})).catch((function(t){throw Object(i.b)({type:o.c}),t}))}},{key:"config",value:function(t){return Object(i.b)({type:o.h,payload:t}),this.api.post("/",{body:JSON.stringify({query:"query {\n          config {\n            ".concat(t,"\n          }\n        }")})}).then((function(e){var n,a;if(e.error)throw e.error;if((null===(n=e.data)||void 0===n?void 0:n.config)&&(null===(a=e.data)||void 0===a?void 0:a.config[t]))return Object(i.b)({type:o.g,payload:e.data.config[t]}),e.data.config[t];throw new u.a({status:404})})).catch((function(t){throw Object(i.b)({type:o.i}),t}))}},{key:"getTableData",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skip:0,take:10};return Object(i.b)({type:o.e}),this.api.post("/",{body:JSON.stringify({query:"query {\n          ".concat(t.name," (skip: ").concat(n.skip||0,", take: ").concat(n.take||10,"){\n            ").concat(null===(e=t.columns)||void 0===e?void 0:e.map((function(t){return t.visible.list&&t.name})),"\n          }\n        }")})}).then((function(e){if(e.errors)throw e.errors;if(e.data&&e.data[t.name]){var n=e.data[t.name];return Object(i.b)({type:o.d,payload:n}),n}return Object(i.b)({type:o.d,payload:[]}),[]})).catch((function(t){Object(i.b)({type:o.f,payload:t[0].message})}))}},{key:"getEntry",value:function(t,e){var n;return Object(i.b)({type:s.b}),this.api.post("/",{body:JSON.stringify({query:"query {\n          ".concat(t.name," (filter: ").concat(this.filterByPks(e),"){\n            ").concat(null===(n=t.columns)||void 0===n?void 0:n.filter((function(t){return t.visible.detail})).map((function(t){return t.name})),"\n          }\n        }")})}).then((function(e){if(e.errors)throw e.errors;if(e.data&&e.data[t.name]){var n=e.data[t.name];return Object(i.b)({type:s.a,payload:n}),n}return Object(i.b)({type:s.a,payload:[]}),[]})).catch((function(t){var e=t.body?t.body.errors:Array.isArray(t)?t[0].message:t.message;Object(i.b)({type:s.c,payload:e})}))}},{key:"filterByPks",value:function(t){var e="";return Object.keys(t).forEach((function(n){e+="{\n          ".concat(n,": {\n            _eq: ").concat(t[n],"\n          }\n        }")})),e}}]),t}())(c.a);e.a=b},40:function(t,e,n){t.exports={topMenu:"style_topMenu__KHyDx"}},46:function(t,e,n){},50:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var a=n(11),r=n.n(a),c=n(43),i=n(18),u=n(21),o=n(44),s=n.n(o),b=n(29),l=[];function d(t,e,n){var a=s()()(e);l.push({method:t,match:a,func:n})}var f=window.fetch;u.b&&(n.e(7).then(n.bind(null,70)),n.e(8).then(n.bind(null,71)),window.fetch=function(){var t=Object(i.a)(r.a.mark((function t(e){var n,a,i,o,s,d,j,h,p,O=arguments;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=O.length>1&&void 0!==O[1]?O[1]:{},t.next=3,Object(b.a)(300);case 3:if("string"!==typeof e){t.next=28;break}a=n.method||"GET",i=e.replace(u.a,""),o=Object(c.a)(l),t.prev=7,o.s();case 9:if((s=o.n()).done){t.next=20;break}if(d=s.value,!(j=d.match(i))||d.method!==a){t.next=18;break}return h="boolean"===typeof j?{}:j,t.next=16,d.func(e,h,n);case 16:return p=t.sent,t.abrupt("return",new Response(JSON.stringify(p)));case 18:t.next=9;break;case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(7),o.e(t.t0);case 25:return t.prev=25,o.f(),t.finish(25);case 28:return t.next=30,f(e,n);case 30:return t.abrupt("return",t.sent);case 31:case"end":return t.stop()}}),t,null,[[7,22,25,28]])})));return function(e){return t.apply(this,arguments)}}())},6:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return i})),n.d(e,"h",(function(){return u})),n.d(e,"g",(function(){return o})),n.d(e,"i",(function(){return s})),n.d(e,"e",(function(){return b})),n.d(e,"d",(function(){return l})),n.d(e,"f",(function(){return d})),n.d(e,"j",(function(){return f})),n.d(e,"k",(function(){return j}));var a=n(2),r="FETCH_TABLES_PENDING",c="FETCH_TABLES_FULFILLED",i="FETCH_TABLES_REJECTED",u="FETCH_TABLE_PENDING",o="FETCH_TABLE_FULFILLED",s="FETCH_TABLE_REJECTED",b="FETCH_TABLE_ENTRIES_PENDING",l="FETCH_TABLE_ENTRIES_FULFILLED",d="FETCH_TABLE_ENTRIES_REJECTED",f={tables:[],loadingTables:!1,loadingTableData:!1,error:!1};function j(t,e){var n=t.tables||[];switch(e.type){case b:return Object(a.a)(Object(a.a)({},t),{},{tableData:void 0,loadingTableData:!0,errorTableData:void 0});case l:return Object(a.a)(Object(a.a)({},t),{},{loadingTableData:!1,tableData:e.payload,errorTableData:void 0});case d:return Object(a.a)(Object(a.a)({},t),{},{loadingTableData:!1,tableData:[],errorTableData:e.payload});case r:return Object(a.a)(Object(a.a)({},t),{},{loadingTables:!0});case u:return n=n.map((function(t){return Object(a.a)(Object(a.a)({},t),{},{loading:t.name===e.payload||t.loading})})),Object(a.a)(Object(a.a)({},t),{},{tables:n});case c:return(e.payload||[]).forEach((function(t){n.find((function(e){return e.name===t.name}))||n.push(Object(a.a)(Object(a.a)({},t),{},{loading:!1}))})),Object(a.a)(Object(a.a)({},t),{},{loadingTables:!1,tables:n});case o:return 0===n.length&&(n=[e.payload]),n=n.map((function(t){return t.name===e.payload.name?Object(a.a)(Object(a.a)({},t),{},{loading:!1},e.payload):Object(a.a)(Object(a.a)({},t),{},{loading:!1})})),Object(a.a)(Object(a.a)({},t),{},{loadingTables:!1,tables:n});case s:case i:return Object(a.a)(Object(a.a)({},t),{},{loadingTables:!1,error:!0});default:return t}}},68:function(t,e,n){},69:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n(0),c=n(39),i=n.n(c),u=n(13),o=function(t){t&&t instanceof Function&&n.e(9).then(n.bind(null,82)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),a(t),r(t),c(t),i(t)}))},s=n(4),b=n(2),l=n(16),d=n(25),f=n.n(d),j=n(32),h=n.n(j),p=n(40),O=n.n(p),y=function(){return Object(a.jsx)("nav",{className:O.a.topMenu,role:"navigation","aria-label":"main navigation"})},v=Object(r.memo)(y),m=n(12),g=n.n(m),E=n(3),x=n(37);var _=n.p+"static/media/logo.103b5fa1.svg",T=function(){return Object(a.jsx)(u.b,{to:"/",className:g.a.logo,children:Object(a.jsx)("img",{src:_,alt:"logo"})})},k=Object(r.memo)(T),N=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{className:g.a.hamburgerCheckbox,id:"hamburger",type:"checkbox"}),Object(a.jsx)("label",{htmlFor:"hamburger",className:g.a.hamburgerButton,children:Object(a.jsx)("i",{className:"fa fa-bars"})})]})},w=Object(r.memo)(N),L=function(){var t=function(){var t=Object(E.c)((function(t){return t.tables})),e=Object(E.c)((function(t){return t.loadingTables}));return Object(r.useEffect)((function(){0!==t.length||e||x.a.list()}),[t,e]),{tables:t,loading:e}}(),e=t.tables,n=t.loading;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(w,{}),Object(a.jsx)(k,{}),Object(a.jsx)("aside",{className:g.a.sideMenuSpace}),Object(a.jsxs)("aside",{className:g.a.sideMenu,children:[Object(a.jsx)("p",{className:g.a.menuLabel,children:"Content Types"}),Object(a.jsx)("ul",{className:g.a.menuList,children:n?Object(a.jsx)("p",{children:"Loading..."}):e.map((function(t,e){return Object(a.jsx)(u.c,{to:"/table/".concat(t.name),activeClassName:g.a.active,children:t.layout.label},e)}))})]})]})},C=Object(r.memo)(L),F=function(t){var e,n=t.children,r=t.className,c=void 0===r?"":r,i=f()((e={},Object(l.a)(e,h.a.layout,!0),Object(l.a)(e,c,c),e));return Object(a.jsxs)("div",{className:i,children:[Object(a.jsx)(C,{}),Object(a.jsxs)("div",{className:h.a.main,children:[Object(a.jsx)(v,{}),Object(a.jsx)("div",{className:h.a.children,children:n})]})]})},D=Object(r.memo)((function(t){var e=Array.isArray(t.children)?t.children.map((function(t){return t.props.path})):t.children.props.path;return Object(a.jsx)(s.b,{exact:!0,path:e,render:function(){return Object(a.jsx)(F,Object(b.a)({},t))}})})),S=n(46),I=n.n(S),A=function(t){var e,n=t.children,r=void 0===n?null:n,c=t.className,i=void 0===c?"":c,u=f()((e={},Object(l.a)(e,I.a.loadingContainer,!0),Object(l.a)(e,i,i),e));return Object(a.jsxs)("div",{className:u,children:[r,"Loading..."]})},B=Object(r.memo)(A),R=n(47),H=n(11),q=n.n(H),P=n(18),J=n(9),U=n(14),G=n(28),M=n(19),Y=n(22),z=n(29),K=new(function(){function t(e){Object(J.a)(this,t),this.api=void 0,this.api=e}return Object(U.a)(t,[{key:"me",value:function(){var t=Object(P.a)(q.a.mark((function t(){return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object(E.b)({type:"FETCH_USER_PENDING"}),t.next=3,Object(z.a)(100);case 3:return t.next=5,this.api.get("/users/me").then((function(t){if(t&&t.id)return Object(E.b)({type:Y.a,payload:t}),t;throw new M.a({status:403})}));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"login",value:function(t,e){var n={username:t,password:e};return this.api.post("/auth/local",{body:JSON.stringify(n)}).then((function(t){if(t.id)return Object(E.b)({type:Y.a,payload:t}),t;throw new M.a({status:403})}))}},{key:"logout",value:function(){return this.api.get("/logout").then((function(){return Object(E.b)({type:"LOGOUT"}),!0}))}}]),t}())(G.a),V=new(function(){function t(){var e=this;Object(J.a)(this,t),this.user=void 0,this.authenticated=!0,localStorage.getItem("username")||void 0?(this.authenticated=!0,K.me().then((function(t){t&&(e.user=t,localStorage.setItem("username",e.user.username))})).catch((function(){e.user=void 0,e.authenticated=!1,localStorage.removeItem("username")}))):this.authenticated=!0}return Object(U.a)(t,[{key:"login",value:function(){var t=Object(P.a)(q.a.mark((function t(e,n){var a;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,K.login(e,n);case 3:a=t.sent,this.user=a,this.authenticated=!0,localStorage.setItem("username",this.user.username),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),this.user=void 0,this.authenticated=!1;case 13:case"end":return t.stop()}}),t,this,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}()},{key:"logout",value:function(){var t=Object(P.a)(q.a.mark((function t(){return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,K.logout();case 3:return t.prev=3,this.authenticated=!1,this.user=void 0,localStorage.removeItem("username"),t.finish(3);case 8:case"end":return t.stop()}}),t,this,[[0,,3,8]])})));return function(){return t.apply(this,arguments)}}()},{key:"isAuthenticated",get:function(){return this.authenticated}},{key:"me",get:function(){return this.user}}]),t}());function Z(t,e,n){return function(r){if(V.isAuthenticated)return t?Object(a.jsx)(t,Object(b.a)({},r)):e?e(r):null;var c={pathname:"/login",search:"?redirect=".concat(n)};return Object(a.jsx)(s.a,{to:c})}}var Q=function(t){var e=t.component,n=t.render,r=Object(R.a)(t,["component","render"]),c=Object(s.f)();return Object(a.jsx)(s.b,Object(b.a)(Object(b.a)({},r),{},{render:Z(e,n,c.pathname)}))},W=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,83))})),X=Object(r.lazy)((function(){return n.e(3).then(n.bind(null,86))})),$=Object(r.lazy)((function(){return n.e(5).then(n.bind(null,84))})),tt=Object(r.lazy)((function(){return n.e(6).then(n.bind(null,85))}));function et(){return Object(a.jsxs)(r.Suspense,{fallback:Object(a.jsx)(B,{}),children:[Object(a.jsx)(s.b,{exact:!0,path:"/login",component:$}),Object(a.jsx)(s.b,{exact:!0,path:"/logout",component:tt}),Object(a.jsxs)(D,{children:[Object(a.jsx)(Q,{exact:!0,path:"/",component:W}),Object(a.jsx)(Q,{exact:!0,path:"/table/:tableName",component:X})]})]})}n(68);var nt=function(){return Object(a.jsx)(E.a,{children:Object(a.jsx)(u.a,{basename:"/react-backoffice",children:Object(a.jsx)(et,{})})})};i.a.render(Object(a.jsx)(nt,{}),document.getElementById("root")),o()}},[[69,1,2]]]);
//# sourceMappingURL=main.069492f1.chunk.js.map